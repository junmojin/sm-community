<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${group.groupName} + ' ì‘ì› ê²Œì‹œíŒ'">ê·¸ë£¹ ì‘ì› ê²Œì‹œíŒ</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
        }
        .group-banner {
            background-size: cover;
            background-position: center;
            height: 250px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .member-buttons button {
            margin: 5px;
            padding: 8px 16px;
            font-size: 14px;
        }
        .post-form textarea {
            width: 100%;
            height: 80px;
            margin-bottom: 10px;
        }
        .post-item {
            border-bottom: 1px solid #ccc;
            padding: 10px 0;
        }
        #member-info {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 8px;
            display: none; /* ì´ˆê¸°ì—ëŠ” ë©¤ë²„ ì •ë³´ ì˜ì—­ì„ ìˆ¨ê²¨ ë†“ìŠµë‹ˆë‹¤ */
        }
        #member-info img {
            border-radius: 8px;
        }
    </style>
</head>
<body>

<!-- âœ… ê·¸ë£¹ ë°°ë„ˆ -->
<div class="group-banner"
     th:style="'background-image: url(/images/' + ${group.groupName} + '_group.jpg)'">
</div>

<!-- âœ… ê·¸ë£¹ ì •ë³´ -->
<h1 th:text="${group.groupName} + ' ì‘ì› ê²Œì‹œíŒ ğŸ¤'">ì‘ì› ê²Œì‹œíŒ</h1>
<p><strong>ë°ë·”ì¼:</strong> <span th:text="${group.debutDate}"></span></p>
<p th:text="${group.description}"></p>

<!-- âœ… ë©¤ë²„ ë²„íŠ¼ ë¦¬ìŠ¤íŠ¸ -->
<h2>ğŸ‘¤ ë©¤ë²„ ëª©ë¡</h2>
<div class="member-buttons">
    <button th:each="member : ${members}"
            th:text="${member.name}"
            th:onclick="'showMemberInfo(' + ${member.memberId} + ')'">
    </button>
</div>

<!-- âœ… ë©¤ë²„ ì •ë³´ í‘œì‹œ -->
<div id="member-info">
    <h3 id="member-name">ë©¤ë²„ ì´ë¦„</h3>
    <p id="member-position">í¬ì§€ì…˜: </p>
    <p id="member-birthday">ìƒë…„ì›”ì¼: </p>
    <img id="member-photo" src="" alt="ë©¤ë²„ ì‚¬ì§„" width="150"/>
</div>

<!-- âœ… ì‘ì›ê¸€ ë“±ë¡ í¼ -->
<h2>ğŸ’Œ ì‘ì›ê¸€ ë‚¨ê¸°ê¸°</h2>
<form class="post-form" method="post" th:action="@{/posts}">
    <input type="hidden" name="groupId" th:value="${group.groupId}"/>
    <input type="text" name="nickname" placeholder="ë‹‰ë„¤ì„" required />
    <textarea name="content" placeholder="ì‘ì›ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”!" required></textarea>
    <button type="submit">ë“±ë¡</button>
</form>

<!-- âœ… ì‘ì›ê¸€ ëª©ë¡ -->
<h2>ğŸ“ƒ ì‘ì›ê¸€ ëª©ë¡</h2>
<div th:each="post : ${posts}" class="post-item">
    <p><strong th:text="${post.nickname}"></strong> <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}"></span></p>
    <p th:text="${post.content}"></p>
</div>

<!-- âœ… ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë©¤ë²„ ìƒì„¸ì •ë³´ í‘œì‹œ -->
<script>
    // Thymeleafì—ì„œ ì „ë‹¬ëœ members ë°ì´í„°ë¥¼ JavaScriptë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
    const members = /*[[${members}]]*/ [];  // ë©¤ë²„ ë°ì´í„°ë¥¼ JavaScript ë³€ìˆ˜ë¡œ ì „ë‹¬

    function showMemberInfo(memberId) {
        const member = members.find(m => m.memberId === memberId);
        if (member) {
            // ë©¤ë²„ ì •ë³´ë¥¼ HTMLì— í‘œì‹œ
            document.getElementById("member-info").style.display = "block";  // ë©¤ë²„ ì •ë³´ ì˜ì—­ í‘œì‹œ
            document.getElementById("member-name").innerText = member.name;
            document.getElementById("member-position").innerText = `í¬ì§€ì…˜: ${member.position}`;
            document.getElementById("member-birthday").innerText = `ìƒë…„ì›”ì¼: ${member.birthday}`;
            document.getElementById("member-photo").src = `/images/${member.profileimg}`;
        }
    }
</script>

</body>
</html>
